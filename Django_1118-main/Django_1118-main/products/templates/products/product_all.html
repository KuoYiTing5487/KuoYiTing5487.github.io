{% extends 'base.html' %}
{% block content %}

<center><h1>商品一覽</h1></center>
 <hr class="rline">

<div class="pagesize">
    {% for instance in object_list %}
            {% if forloop.counter <= 4 and instance.picture != Null %}
                <div class ="size">
                    <a href ='{{ instance.get_absolute_url }}'>
                        <div class="forimage">
                            <img src="{{ instance.picture.url}}">
                        </div >
                        <div style="margin: 50px 0 0 0 ;">
                            <p class="psize" style="font-size:18px;"> {{ instance.product_name }} </p>
                            <p class="psize" style="font-size:14px;"> {{ instance.material_color }} </p>
                        </div>
                    </a>

                    <div>
                        {% if request.user.identity == 0 %}  <!-- 消費者 -->
                            <div style="display: flex;">
                                <div style="display: flex; position: absolute; left: 20%;">
                                    <a href="products/{{ instance.id }}/Simulate/"><button class="HomeButton">模擬配戴</button></a>
                                </div>

                                <div style="display: flex; position: absolute; right: 45%;">
                                    <form action='.' method='POST'>{% csrf_token %}
                                        {{ form.as_p }}
                                        {% for inst in cart %}
                                            {% if instance.id == inst.product.id %}
                                                <button class="chosen_heart">&#10084</button>
                                            {% else %}
                                                <button class="heart">&#10084</button>
                                            {%endif%}
                                        {%endfor%}
                                    </form>
                                </div>
                            </div>

                        {% elif request.user.identity == 1 %} <!-- 廠商 -->
                            <a href="products/{{ instance.id }}/Simulate/"><button class="HomeButton">模擬配戴</button></a>
                        {% endif %}
                    </div>
                </div>
            {% endif %}
    {% endfor %}
</div>

<div class="pagesize">
    {% for instance in object_list %}
            {% if 5 <= forloop.counter and forloop.counter <= 8 %}
                <div class ="size">
                    <a href ='{{ instance.get_absolute_url }}'>
                        <div class="forimage">
                            <img src="{{ instance.picture.url }}">
                        </div >
                        <div style="margin: 50px 0 0 0 ;">
                            <p class="psize" style="font-size:18px;"> {{ instance.product_name }} </p>
                            <p class="psize" style="font-size:14px;"> {{ instance.material_color }} </p>
                        </div>
                    </a>
                    {% if request.user.identity == 0 %}  <!-- 消費者 -->
                        <div style="display: flex;">
                            <div style="display: flex; position: absolute; left: 20%;">
                                <a href="products/{{ instance.id }}/Simulate/"><button class="HomeButton">模擬配戴</button></a>
                            </div>

                            <div style="display: flex; position: absolute; right: 45%;">
                                {% for inst in cart %}
                                    {% if instance.id == inst.product.id %}
                                        <button class="chosen_heart">&#10084</button>
                                    {%endif%}
                                {%endfor%}
                                <button class="heart">&#10084</button>
                            </div>
                        </div>
                    {% elif request.user.identity == 1 %} <!-- 廠商 -->
                        <a href="products/{{ instance.id }}/Simulate/"><button class="HomeButton">模擬配戴</button></a>
                    {% endif %}
                </div>
            {% endif %}
    {% endfor %}
</div>

<div class="pagesize">
    {% for instance in object_list %}
            {% if 9 <= forloop.counter and forloop.counter <= 12 %}
                <div class ="size">
                    <a href ='{{ instance.get_absolute_url }}'>
                        <div class="forimage">
                            <img src="{{ instance.picture.url }}">
                        </div >
                        <div style="margin: 50px 0 0 0 ;">
                            <p class="psize" style="font-size:18px;"> {{ instance.product_name }} </p>
                            <p class="psize" style="font-size:14px;"> {{ instance.material_color }} </p>
                        </div>
                    </a>
                    {% if request.user.identity == 0 %}  <!-- 消費者 -->
                        <div style="display: flex;">
                            <div style="display: flex; position: absolute; left: 20%;">
                                <a href="products/{{ instance.id }}/Simulate/"><button class="HomeButton">模擬配戴</button></a>
                            </div>

                            <div style="display: flex; position: absolute; right: 45%;">
                                {% for inst in cart %}
                                    {% if instance.id == inst.product.id %}
                                        <button class="chosen_heart">&#10084</button>
                                    {%endif%}
                                {%endfor%}
                                <button class="heart">&#10084</button>
                            </div>
                        </div>
                    {% elif request.user.identity == 1 %} <!-- 廠商 -->
                        <a href="products/{{ instance.id }}/Simulate/"><button class="HomeButton">模擬配戴</button></a>
                    {% endif %}
                </div>
            {% endif %}
    {% endfor %}
</div>

{% endblock %}